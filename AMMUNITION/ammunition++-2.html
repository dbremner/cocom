<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.20">
 <TITLE>Ammunition (Reusable packages) - C++ interface: Package for allocating memory with fixing some allocation errors</TITLE>
 <LINK HREF="ammunition++-3.html" REL=next>
 <LINK HREF="ammunition++-1.html" REL=previous>
 <LINK HREF="ammunition++.html#toc2" REL=contents>
</HEAD>
<BODY>
<A HREF="ammunition++-3.html">Next</A>
<A HREF="ammunition++-1.html">Previous</A>
<A HREF="ammunition++.html#toc2">Contents</A>
<HR>
<H2><A NAME="s2">2.</A> <A HREF="ammunition++.html#toc2">Package for allocating memory with fixing some allocation errors</A></H2>

<P>Developing modern compilers it is necessary to avoid arbitrary limits
on the length or number of any data structure by allocating all data
structures dynamically.  Here the package `allocate' which implements
allocation and freeing memory with automatic fixing allocation errors
is suggested.</P>
<P>The package automatically calls action on situation `no memory'.  The
action never returns control back because after calling function which
processes allocation error the function `abort' is always called.
Therefore the function which processes allocation error should not
return control back.</P>
<P>The interface part of the package is file `allocate.h'.  The
implementation part is file `allocate.cpp'.  The interface contains
class `allocate' without any public constructors/destructors.  The
class has the following functions:</P>
<P>
<DL>
<DT><B>Static public function `change_error_function'</B><DD><P>
<BLOCKQUOTE><CODE>
<PRE>
        `void change_error_function
              (void (*error_function) (void))) (void)'
        
</PRE>
</CODE></BLOCKQUOTE>

is used for changing up action on the situation `no memory'.
The function also returns former function which was early
action on the situation `no memory'.</P>

<DT><B>Static public function `default_error_function'</B><DD><P>
<BLOCKQUOTE><CODE>
<PRE>
        `void default_error_function (void)'
        
</PRE>
</CODE></BLOCKQUOTE>

is default action of the package on the situation `no memory'.
This action consists of output message `*** no memory ***' to
standard error stream and calling function `exit' with code
equals to 1.</P>

<DT><B>Static public function `malloc'</B><DD><P>
<BLOCKQUOTE><CODE>
<PRE>
        `void *malloc (size_t size)'
        
</PRE>
</CODE></BLOCKQUOTE>

is analogous to ANSI C library function `malloc'.  The
parameter is size of needed memory.  The function returns
address of allocated memory.</P>

<DT><B>Static public function `calloc'</B><DD><P>
<BLOCKQUOTE><CODE>
<PRE>
        `void *calloc (size_t nel, size_t size)'
        
</PRE>
</CODE></BLOCKQUOTE>

is analogous to ANSI C library function `calloc'.  The
parameters have the same sense as in standard function
`calloc'.  The function returns address of allocated memory.</P>

<DT><B>Static public function `free'</B><DD><P>
<BLOCKQUOTE><CODE>
<PRE>
        `void free (void *ptr)'
        
</PRE>
</CODE></BLOCKQUOTE>

is analogous to ANSI C library function `free' but can accept
nil pointer value.  In this case function does nothing.</P>

<DT><B>Static public function `realloc'</B><DD><P>
<BLOCKQUOTE><CODE>
<PRE>
        `void *realloc(void *old, size_t size)'
        
</PRE>
</CODE></BLOCKQUOTE>

is analogous to ANSI C library function `realloc'.  The first
parameter is old address of reallocated memory.  The second
parameter is new size of reallocated memory.  The function
returns new address of reallocated memory.</P>
</DL>
</P>

<HR>
<A HREF="ammunition++-3.html">Next</A>
<A HREF="ammunition++-1.html">Previous</A>
<A HREF="ammunition++.html#toc2">Contents</A>
</BODY>
</HTML>
