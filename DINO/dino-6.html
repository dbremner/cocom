<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>The Programming Language DINO: Executive statements</TITLE>
 <LINK HREF="dino-7.html" REL=next>
 <LINK HREF="dino-5.html" REL=previous>
 <LINK HREF="dino.html#toc6" REL=contents>
</HEAD>
<BODY>
<A HREF="dino-7.html">Next</A>
<A HREF="dino-5.html">Previous</A>
<A HREF="dino.html#toc6">Contents</A>
<HR>
<H2><A NAME="s6">6. Executive statements</A></H2>

<P>Statements denote actions.  There are <EM>simple</EM> and
<EM>compound</EM> statements.  Simple statements do no consists of any
parts that are statements themselves.  They are the assignment, the
procedure call, the return, the break, the continue, the throw, and
the wait statements.  Analogous to C language the last symbol of Dino
simple statement is semicolon <CODE>;</CODE>.  Compound statements
consists of parts that are statements themselves.  They are used to
express sequencing, exception handling, conditional, and repetitive
execution.
<P>
<H2><A NAME="ss6.1">6.1 Empty statement</A>
</H2>

<P>There is also empty statement in Dino.  It denotes no action.  The
empty statement is included in Dino for convenience.
<BLOCKQUOTE><CODE>
<PRE>
          ExecutiveStmt = ";"
</PRE>
</CODE></BLOCKQUOTE>

Example: Usage of empty statement in for-statement
<BLOCKQUOTE><CODE>
<PRE>
          for (i = 0; a[i] == 0; i++)
            ;
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H2><A NAME="ss6.2">6.2 Block-statement</A>
</H2>

<P>Block-statement is simply block and can used to group statements in
one statement and/or also to describe local declarations.  How the
block is executed see in section <EM>Declaration and Scope Rules</EM>.
<BLOCKQUOTE><CODE>
<PRE>
          ExecutiveStmt = BlockStmt

          BlockStmt = Block
</PRE>
</CODE></BLOCKQUOTE>

Example: Usage of block-statement in for-statement
<BLOCKQUOTE><CODE>
<PRE>
          sum = 0;
          for (i = 0; i &lt; #a; i++)
            {
              var value = a[i];
              if (value > 0)
                sum += value;
            }
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H2><A NAME="ss6.3">6.3 Assignment statements</A>
</H2>

<P>
<P>Assignment-statements is used to change variable values or element
values of a structured value which are referred through a designator
(see sub-section <EM>Designator</EM> in section <EM>Expressions</EM>.
The designator can not denote final variable (see section <EM>Variable
Declaration</EM>).  You can not change element value of immutable
value (see section <EM>Types and Values</EM>).  In this case exception
<CODE>immutable</CODE> is generated.
<P>Simple assignment statement looks like <CODE>Designator = Expr;</CODE>.
That means that the expression value is assigned to variable or
element of structured type value denoted by the designator.  For
convenience of C programmers there are also Dino assignments kind of
<CODE>Designator op= Expr;</CODE>, <CODE>Designator++;</CODE>,
<CODE>++Designator;</CODE>, <CODE>Designator--;</CODE>, and
<CODE>--Designator;</CODE>.  They are analogous correspondingly to
<CODE>Designator = Designator op Expr;</CODE>, <CODE>Designator = Designator
+ 1;</CODE>, and <CODE>Designator = Designator - 1;</CODE>.  The only
difference is in that the Designator is evaluated only once not twice
as in the analogous form.  It is important to know if you have
<EM>side effects</EM> in the statement.
<BLOCKQUOTE><CODE>
<PRE>
          ExecutiveStmt = Designator Assign  Expr ";"
                        | Designator ("++" | "--")  ";"
                        | ("++" | "--")  Designator ";"
          Assign = "="
                 | "*="
                 | "/="
                 | "%="
                 | "+="
                 | "-="
                 | "@="
                 | "&lt;&lt;="
                 | ">>="
                 | ">>>="
                 | "&amp;="
                 | "^="
                 | "|="
</PRE>
</CODE></BLOCKQUOTE>

Examples:
<BLOCKQUOTE><CODE>
<PRE>
          v = [10, 20];
          i = 1;
          i++;
          --i;
          i *= 20
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H2><A NAME="ss6.4">6.4 Call-statement</A>
</H2>

<P>Call-statement is used to call a function, a thread-function, or a
class.  It works analogous to the call in expression (see sub-section
<EM>Call</EM> in section <EM>Types and Values</EM>).  The single
difference is in that call-statement throws away the call result.
<BLOCKQUOTE><CODE>
<PRE>
          ExecutiveStmt = Designator ActualParameters  ";"
</PRE>
</CODE></BLOCKQUOTE>

Examples:
<BLOCKQUOTE><CODE>
<PRE>
          putln ("percent=" @ percent @ "%");
          newthread ();
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H2><A NAME="ss6.5">6.5 If-statement</A>
</H2>

<P>Dino if-statement is analogous to C language one.  The first,
expression after <CODE>if</CODE> is evaluated and arithmetic conversion is
made to it.  The value should be an integer or a floating-point
number, otherwise exception <CODE>optype</CODE> is generated.  If the
value is nonzero the first statement is executed, otherwise the
statement after <CODE>else</CODE> is executed if any.  The problem with
<EM>dangling else</EM> is resolved analogous to C language --
<CODE>else</CODE> is associated with the last <CODE>if</CODE>.
<BLOCKQUOTE><CODE>
<PRE>
          ExecutiveStmt = if  "(" Expr ")" Stmt [ else Stmt ]
</PRE>
</CODE></BLOCKQUOTE>

Examples:
<BLOCKQUOTE><CODE>
<PRE>
          if (i &lt; 0) i = 0;
          if (i &lt; j) return -1; else if (i > 0) return 1; else return 0;
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H2><A NAME="ss6.6">6.6 For-statement</A>
</H2>

<P>Dino for-statement is analogous to C language one.  The statement is
executed in the following way.
<OL>
<LI>Execution of the first statement in the parentheses.</LI>
<LI>The expression (<EM>for-guard</EM>) is evaluated and the
implicit arithmetic conversion is made.  The value should be
an integer or a floating point number.  If this is not true,
exception <CODE>optype</CODE> is generated.</LI>
<LI>If the value of for-guard is nonzero, the body of the loop
(the last statement) is executed.  Otherwise, the
for-statement execution finishes.</LI>
<LI>When the body has been executed, the second statement in
the parentheses is executed and steps 2,3,4 (one iteration) are
repeated.</LI>
</OL>

If the second statement is a simple statement, the statement semicolon
can be omitted.  The for-statement also can be finished by execution
of statement <CODE>break</CODE> in the body.  The body can be finished by
execution of statement <CODE>continue</CODE>.  In this case, the
for-statement execution continues with the step 4.
<BLOCKQUOTE><CODE>
<PRE>
          ExecutiveStmt = for  "("  Stmt ForGuardExpr ";"  Stmt ")" Stmt

          ForGuardExpr = [Expr]
</PRE>
</CODE></BLOCKQUOTE>

Examples:
<BLOCKQUOTE><CODE>
<PRE>
          for (i = 0; i &lt; 10; i++;) sum += v [i];
          for (i = 0; i &lt; 10; i++) sum += v [i];
          for ({sum = 0; i = 0;} i &lt; 10; i++) sum += v [i];
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H2><A NAME="ss6.7">6.7 Foreach-statement</A>
</H2>

<P>This statement is used to execution of the foreach-statement body (the
statement) for all keys of table which is value of the expression.
The expression value should be a table.  If this is not true,
exception <CODE>keyop</CODE> is generated.  The current key value on each
iteration is assigned to the designator.  The order in which key
values are assigned on each iteration is undefined.  One iteration can
be finished with the aid of statement <CODE>continue</CODE> and all
foreach-statement can be finished by execution of statement
<CODE>break</CODE>.
<BLOCKQUOTE><CODE>
<PRE>
          ExecutiveStmt = for  "("  Designator in Expr ")" Stmt
</PRE>
</CODE></BLOCKQUOTE>

Examples:
<BLOCKQUOTE><CODE>
<PRE>
          putln ("All table is");
          for (k in t) {
            put ("key=");
            print (k);
            put (", element=");
            println (t{k});
          }
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H2><A NAME="ss6.8">6.8 Break- and continue-statement</A>
</H2>

<P>Statements <CODE>break</CODE> and <CODE>continue</CODE> are used
correspondingly to finish execution of the most nested for- or
foreach-statement covering the statement and to finish one iteration
of the body of the for- or foreach-statement.  These statement can
be used only inside of a for- or foreach-statement.
<BLOCKQUOTE><CODE>
<PRE>
          ExecutiveStmt = break ";"
                        | continue ";"
</PRE>
</CODE></BLOCKQUOTE>

Examples:
<BLOCKQUOTE><CODE>
<PRE>
          for (i = 0; i &lt; 10; i++) {
             if (ind [i] &lt; 0)
               continiue;
             val = v [ind[i]];
          }
          for (i in t)
            if (t{i} == elval)
              break;
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H2><A NAME="ss6.9">6.9 Return-statement</A>
</H2>

<P>Return-statement is used to finish execution of a function, a thread,
or class block.  The statement corresponds to the most nested
function, function-thread, or class covering the statement.  So
return-statement can be placed only in a function, a function-thread,
or a class.  Expression in return-statement can be given only for
functions.  In this case, the expression value will be value of the
function call (instead of default result value <B>nil</B>).
<BLOCKQUOTE><CODE>
<PRE>
          ExecutiveStmt = return  [ Expr ] ";"
</PRE>
</CODE></BLOCKQUOTE>

Examples:
<BLOCKQUOTE><CODE>
<PRE>
          return;
          return [10, 2:0]
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H2><A NAME="ss6.10">6.10 Throw-statement</A>
</H2>

<P>This statement generates exception which is given by value of the
expression.  The expression should be an object of predeclared class
<CODE>except</CODE> or an object of class declared somewhere in
predeclared class <CODE>except</CODE>.  If this is not true, exception
<CODE>optype</CODE> is generated.  How exceptions are processed are
described in the following section.
<BLOCKQUOTE><CODE>
<PRE>
          ExecutiveStmt = throw  Expr ";"
</PRE>
</CODE></BLOCKQUOTE>

Examples:
<BLOCKQUOTE><CODE>
<PRE>
          ext except {
            ext error {
              class myexcept (msg) {}
            }
          }
          throw errors.myexcept ("this is an user defined exception");
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H2><A NAME="ss6.11">6.11 Try-block</A>
</H2>

<P>Exceptions can be generated by Dino interpreter when some conditions
are not satisfied, by predeclared Dino functions, by other OS
processes, by user interruptions, or by user with the aid of
throw-statement.  Actually, the exceptions are represented by an
object of predeclared class <CODE>except</CODE> or by an object of class
declared inside of the predeclared class <CODE>except</CODE>.  All
predeclared exceptions are described in section <EM>Predeclared
Identifiers</EM>.  To catch and to process exceptions, try-block can
be used.
<P>When an exception is occurred, the most nested try-block which
covering the statement generating the exception or currently being
executed (when this is is generated by an OS process, by an user
interruption) is searched for.  Then, expressions in the catch list
elements are processed subsequently.  The expression value in the catch
list element being processed should be predeclared class
<CODE>except</CODE> or class declared inside the predeclared class
<CODE>except</CODE>.  If the expression being processed is a class and the
exception is an object of the class or an object of a class declared
in the class given by the expression being processed, the block
corresponding to given catch list element is executed.  If there is
not such catch expression, the most nested try-block covering the
current try-block is searched for and processing the exception is
repeated.  If there are no more such try-blocks, the program finishes
with diagnostics which is dependent on the generated exception.
<P>Blocks corresponding to catch list elements have predeclared variable
<CODE>e</CODE>.  When the block execution start, the variable contains the
object representing the exception.
<BLOCKQUOTE><CODE>
<PRE>
          ExecutiveStmt = TryBlockStmt

          TryBlockStmt = try Block { Catch }
        
          Catch = catch  "(" ExceptClassList ")" Block

          ExceptClassList = Expr { "," Expr }
</PRE>
</CODE></BLOCKQUOTE>

Examples:
<BLOCKQUOTE><CODE>
<PRE>
          try {
            var ln;
            for (;;)
              ln = getln;
          } catch (invcalls.eof) {
          }
          try {
            var v = [];
            v {1} = 0;
          } catch (except) {
            put ("catching and propagating up exception"); println (class (e));
            throw e;
          }
</PRE>
</CODE></BLOCKQUOTE>
<P>
<H2><A NAME="ss6.12">6.12 Wait-statement</A>
</H2>

<P>This statement is used for synchronization of different threads in
Dino program.  The expression can not contain a function,
thread-function call.  The thread in which the statement has been
executed waits until the expression value becomes nonzero.  The
expression value (after implicit arithmetic conversion) should be an
integer or a floating point number.  Otherwise exception
<CODE>optype</CODE> is generated.  The important thing to know how to make
synchronization is that the assignment statement without calls is
always executed as one transaction.
<BLOCKQUOTE><CODE>
<PRE>
          ExecutiveStmt = wait  Expr ";"
</PRE>
</CODE></BLOCKQUOTE>

Examples:
<BLOCKQUOTE><CODE>
<PRE>
          wait !empty;
</PRE>
</CODE></BLOCKQUOTE>
<P>
<HR>
<A HREF="dino-7.html">Next</A>
<A HREF="dino-5.html">Previous</A>
<A HREF="dino.html#toc6">Contents</A>
</BODY>
</HTML>
